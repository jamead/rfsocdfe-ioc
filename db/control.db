#############################################################
#
#       Database for Common Hardware Carrier IOC
#
#############################################################


record(bo, "$(P){RFDFE:$(NO)}wfm-RECONNECT") {
    field(DTYP, "PSC Ctrl Reconnect")
    field(OUT , "@psc$(NO)")
    field(ZNAM, "Wfm Reconnect")
    field(ONAM, "Wfm Reconnect")
}


record(bo, "$(P){RFDFE:$(NO)}TX-RECONNECT") {
    field(DTYP, "PSC Ctrl Reconnect")
    field(OUT , "@psc$(NO)")
    field(ZNAM, "Ctrl Reconnect")
    field(ONAM, "Ctrl Reconnect")
}

record(bo, "$(P){RFDFE:$(NO)}RX10Hz-RECONNECT") {
    field(DTYP, "PSC Ctrl Reconnect")
    field(OUT , "@psc$(NO)")
    field(ZNAM, "10Hz Rx Reconnect")
    field(ONAM, "10Hz Rx Reconnect")
}



# Flush reg to socket buffer, trigger send to send all socket buffer to PSC 
record(bo, "$(P){RFDFE:$(NO)}send") { 
    field(DTYP, "PSC Ctrl Send All") 
    field(OUT , "@psc$(NO)") 
    field(ZNAM, "Send") 
    field(ONAM, "Send") 
} 
 
# Write a single register
record(longout, "$(P){RFDFE:$(NO)}GoRegSingleWrite") {
    field(DTYP, "PSC Ctrl Send")
    field(OUT , "@psc$(NO)")
    field(VAL , "1") 
    field(FLNK, "$(P){RFDFE:$(NO)}send")
}

# Write a single register
record(longout, "$(P){RFDFE:$(NO)}GoRegSingleWrite0") {
    field(DTYP, "PSC Ctrl Send")
    field(OUT , "@psc$(NO)")
    field(VAL , "0") 
    field(FLNK, "$(P){RFDFE:$(NO)}send")
}
 
# Write a single register
record(longout, "$(P){RFDFE:$(NO)}GoRegSingleWrite1") {
    field(DTYP, "PSC Ctrl Send")
    field(OUT , "@psc$(NO)")
    field(VAL , "1") 
    field(FLNK, "$(P){RFDFE:$(NO)}send")
}

# Write a single register
record(longout, "$(P){RFDFE:$(NO)}GoRegSingleWrite2") {
    field(DTYP, "PSC Ctrl Send")
    field(OUT , "@psc$(NO)")
    field(VAL , "2") 
    field(FLNK, "$(P){RFDFE:$(NO)}send")
}

# Write a single register
record(longout, "$(P){RFDFE:$(NO)}GoRegSingleWrite5") {
    field(DTYP, "PSC Ctrl Send")
    field(OUT , "@psc$(NO)")
    field(VAL , "5") 
    field(FLNK, "$(P){RFDFE:$(NO)}send")
}


############# Control PV's ##########################################

record(bo, "$(P){RFDFE:$(NO)}KeepAlive-SP") {
    field(DESC, "Keeps the socket active")
    field(DTYP, "PSC Single U32")
    field(OUT , "@psc$(NO) 5 100")
    field(SCAN, "1 second")
    field(FLNK, "$(P){RFDFE:$(NO)}GoRegSingleWrite5")
}


# TOP FP LED
record(bo, "$(P){RFDFE:$(NO)}FPLedTop-SP") {
    field(DESC, "Top FP LED")
    field(DTYP, "PSC Single U32")
    field(OUT , "@psc$(NO) 0 0")
    field(ZNAM,"Off")
    field(ONAM,"On")
    field(FLNK, "$(P){RFDFE:$(NO)}GoRegSingleWrite0")
}

# BOT FP LED
record(bo, "$(P){RFDFE:$(NO)}FPLedBot-SP") {
    field(DESC, "Bot FP LED")
    field(DTYP, "PSC Single U32")
    field(OUT , "@psc$(NO) 0 4")
    field(ZNAM,"Off")
    field(ONAM,"On")
    field(FLNK, "$(P){RFDFE:$(NO)}GoRegSingleWrite0")
}






 



